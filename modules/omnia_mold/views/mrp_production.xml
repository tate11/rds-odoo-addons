<odoo>
 <record id="omnia_mold_mrp_bom_form" model="ir.ui.view">
            <field name="name">omnia.mold.mrp.bom.form</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.mrp_production_form_view"/>
            <field name="arch" type="xml">
                <button name="button_plan" position="replace">
                    <button name="button_plan" attrs="{'invisible': ['|', '|', '&amp;', ('mold_routing_id', '=', False), ('routing_id', '=', False), ('is_locked', '=', False), ('state', '!=', 'confirmed')]}" type="object" string="Create Workorders" class="oe_highlight"/>
                </button>

                <xpath expr="//div[@class='oe_title']" position="before">
                    <field name="mould_maintenance" invisible="True"/>
                    <div class="alert alert-danger" style="text-align: center; font-size: 18px"
                        attrs="{'invisible': [('mould_maintenance','=', False)]}">
                        <span class="fa fa-exclamation-triangle" style="color:red;width:100%;text-align:center;font-size:60px"></span><br/>Attenzione: L'attrezzatura è in manutenzione!
                    </div>
                    <div class="alert alert-warning" style="text-align: center; font-size: 12px"
                        attrs="{'invisible': [('mould_cavity_close','=', False)]}">
                        Nello stampo ci sono cavità chiuse
                    </div>
                    <field name="msg_mold" invisible="True"/>
                    <div attrs="{'invisible': [('msg_mold', '=', '')]}" class="alert alert-info" style="text-align: center; font-size: 12px">
                        <field name="msg_mold"/>
                    </div>
                </xpath>
                <xpath expr="//field[@name='product_qty']/.." position="replace">
                    <div class="o_row">
                        <field name="product_qty" attrs="{'readonly': [('has_moves', '=', True)]}"/>
                        <field name="product_uom_id" options="{'no_open':True,'no_create':True}" groups="product.group_uom" attrs="{'readonly': [('has_moves', '=', True)]}"/>
                        <button type="action" name="749" string="Update" class="oe_link" attrs="{'invisible': ['|', ('state', 'in', ('done','cancel')), ('id', '=', False)]}"/>
                    </div>
                    <field name="tool_production_previews"><tree><field name="tool_id"/></tree></field>
                </xpath>
                <xpath expr="//field[@name='product_id']/../.." position="before">
                    <group  attrs="{'invisible': [('mold_routing_id', '=', False)]}">
                        <field name="mold_product_ids">
                            <tree>
                                <field name="default_code"/>
                                <field name="name"/>
                                <field name="qty_available"/>
                                <field name="virtual_available"/>
                                <field name="uom_id"/>
                            </tree>
                        </field>
                    </group>
                </xpath>
                <xpath expr="//field[@name='origin']" position="after">
                    <field name="product_molds" invisible="True"/>
                    <field name="mold_id" domain="[('id','in', product_molds)]" attrs="{'invisible': [('product_id', '=', False)], 'readonly': [('has_moves', '=', True)], 'required': [('routing_type', '!=', 'process')]}"/>
                    <field name="mould_cavity_close" invisible="True"/>
                    <field name="mould_routings" invisible="True"/>
                    <field name="mold_routing_id"
                            attrs="{'invisible': [('mold_id', '=', False)], 'required': [('mold_id', '!=', False)], 'readonly': [('has_moves', '=', True)]}"
                            domain="[('id','in', mould_routings)]" options="{'always_reload': True}"/>
                    <field name="tool_workcenter_ids" attrs="{'invisible': [('mold_routing_id', '=', False)]}" widget="many2many_tags"/>
                </xpath>
                <xpath expr="//field[@name='routing_id']" position="attributes">
                    <attribute name="attrs">{'invisible': [('mold_id', '!=', False)]}</attribute>
                </xpath>
                <xpath expr="//field[@name='routing_id']" position="after">
                    <field name="routing_type"/>
                </xpath>
                <field name="availability" position="after">
                    <field name="project_id"/>
                    <field name="customer_id"/>
                </field>
            </field>
        </record>
        <record id="omnia_mold_mrp_bom_tree" model="ir.ui.view">
            <field name="name">omnia.mold.mrp.bom.tree</field>
            <field name="model">mrp.production</field>
            <field name="inherit_id" ref="mrp.mrp_production_tree_view"/>
            <field name="arch" type="xml">
                <field name="name" position="after">
                    <field name="customer_id"/>
                    <field name="def_date_planned_start"/>
                    <field name="def_date_planned_finished"/>
                </field>
            </field>
        </record>
       
            
<record id="action_server_merge_mrp_production" model="ir.actions.server">
     <field name="name">Merge</field>
     <field name="type">ir.actions.server</field>
     <field name="model_id" ref="mrp.model_mrp_production" />
     <field name="binding_model_id" ref="mrp.model_mrp_production" />
     <field name="state">code</field>
     <field name="code">
     action = env['merge_mold_production'].getActionMergeWizard(env.context.get('active_ids'))  
     </field>
 </record>
 <record id="action_server_post_mrp_production" model="ir.actions.server">
     <field name="name">Post</field>
     <field name="type">ir.actions.server</field>
     <field name="model_id" ref="mrp.model_mrp_production" />
     <field name="binding_model_id" ref="mrp.model_mrp_production" />
     <field name="state">code</field>
     <field name="code">
     action = env['mold_post_qty'].getActionPostWizard(env.context.get('active_ids'))  
     </field>
 </record>
 
     <record id="custom_lable" model="report.paperformat">
        <field name="name">custom_lable</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">1</field>
        <field name="margin_bottom">1</field>
        <field name="margin_left">1</field>
        <field name="margin_right">1</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">20</field>
        <field name="dpi">90</field>
    </record>
    
      <report id="report_omnia_mold_labels"
            model="mold_post_qty_line"
            string="Print lables"
            paperformat="custom_lable"
            report_type="qweb-pdf"   
            name="omnia_mold.mrp_production_lables"
            header="False"   
             /> 
 
</odoo>